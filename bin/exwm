#!/bin/sh

################################################################################
# A script to start the Emacs X Window Manager (EXWM).
set -e

################################################################################
# Disable access control:
xhost "+SI:localuser:$USER"

# Make Java applications aware this is a non-reparenting window manager:
export _JAVA_AWT_WM_NONREPARENTING=1

# How the server name is chosen:
EMACS_SERVER_NAME=${EMACS_SERVER_NAME:=server}

# Start Emacs:
exec @emacspath@/emacs \
     --fg-daemon="$EMACS_SERVER_NAME" \
     --eval "(require 'exwm)" \
     -f exwm-enable "$@"
