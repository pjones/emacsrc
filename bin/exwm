#!/bin/sh

################################################################################
# A script to start the Emacs X Window Manager (EXWM).
set -e

################################################################################
# Disable access control:
xhost "+SI:localuser:$USER"

# Make Java applications aware this is a non-reparenting window manager:
export _JAVA_AWT_WM_NONREPARENTING=1

# Some variables that can be overridden:
EMACS_BIN=${EMACS_BIN:=@emacspath@/emacs}
EMACS_SERVER_NAME=${EMACS_SERVER_NAME:=server}

# Start Emacs:
exec "$EMACS_BIN" \
     --eval "(setq server-name \"$EMACS_SERVER_NAME\")" \
     --eval "(require 'exwm)" \
     -f server-start \
     -f exwm-enable \
     "$@"
