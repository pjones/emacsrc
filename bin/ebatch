#!/bin/sh

################################################################################
# A script to run Emacs in batch mode, preserving my configuration.
set -e

################################################################################
export PATH=@path@:$PATH
lispdir=$(dirname "@loadpathel@")

################################################################################
# The redirection madness is to remove "Loading" messages from stderr.
{ emacs \
  --batch \
  --funcall package-initialize \
  --load "$lispdir/modes.el" \
  "$@" 2>&1 1>&3 | grep -v '^Loading ' 1>&2; } 3>&1
