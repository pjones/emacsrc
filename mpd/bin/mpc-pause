#!/usr/bin/env ruby

################################################################################
# http://mpd.wikia.com/wiki/MusicPlayerDaemonCommands
require('rubygems')
require('rmpd')

################################################################################
mpc = Rmpd::Connection.new
status = mpc.status

if status.nil? or status.state == 'stop'
  mpc.play
elsif status.state == 'pause'
  mpc.pause(0)
elsif status.state == 'play'
  current = mpc.current_song

  if current.file.match(/^http:/)
    mpc.stop
  else
    mpc.pause(1)
  end
end
